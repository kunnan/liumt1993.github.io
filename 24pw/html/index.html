<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>关爱“心”世界</title>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="24小时公益,腾讯公益">
    <meta name="description" content="24小时创益比赛">
    <meta name="apple-mobile-web-app-capable" content="no">
    <meta name="format-detection" content="telephone=no">
    <meta name="wxm:timeline_title" content="9·9公益日，关爱“心”世界，一起聊聊抑郁症。">
    <meta name="wxm:appmessage_title" content="9·9公益日，关爱“心”世界，一起聊聊抑郁症。">
    <meta name="wxm:appmessage_desc" content="心理健康项目，期待你的关注。">
    <!-- 分享缩略图，必须为绝对路径，且图片链接必须为http协议（由于安卓微信客户端无法获取https的分享图片，仅此处需要强制http协议）-->
    <meta name="wxm:img_url" content="//wximg.qq.com/tmt/_demo/wxmoment/img/thumb.jpg">
    <!-- 分享链接-->
    <meta name="wxm:link" content="">
    <link rel="stylesheet" type="text/css" data-href="../css/style-index.css">
<script>function webpsupport(a){var c=window.localStorage;if(typeof a!="function"){a=function(){}}if(c!=undefined&&c._tmtwebp!=undefined&&c._tmtwebp==0){a();return false}else{if(c!=undefined&&c._tmtwebp!=undefined&&c._tmtwebp==1){a(1);return true}else{var f=new Image();f.onload=f.onerror=function(){if(f.height!=2){if(c!=undefined){c._tmtwebp=0}a();return false}else{if(c!=undefined){c._tmtwebp=1}a(1);return true}};f.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}}};;(function(){function b(t){var f=document.getElementsByTagName("link");for(var e=0,d=f.length;e<d;e++){if(t){f[e].href=f[e].getAttribute("data-href").replace(".css",".webp.css");}else{f[e].href=f[e].getAttribute("data-href")}}}webpsupport(b);})();</script><script>window.imgMap = {"99gy.png":1,"falling-c.png":1,"music-switch.png":1,"p1.png":0,"p2.png":0,"p3.png":0,"p4.png":1,"p5.png":0,"p6.png":0,"p7.png":0,"p8.png":0,"pic1.jpg":1,"pic2.jpg":1,"pic3.jpg":1,"pic4.jpg":1,"pic5.jpg":1,"pic6.jpg":1,"pic7.jpg":1,"pic8.jpg":1,"pro1.jpg":1,"pro2.jpg":1,"pro3.jpg":1,"pro4.jpg":1,"txgy-qrcode.jpg":1,"up.png":1}</script>

<body>
    <div class="loader">
        <div class="loader-progress">
            <div class="progress-bar"></div>
        </div>
    </div>
    <div class="wrap">
        <section class="screen screen1">
            <img class="img-scenes" src="../img/pic1.jpg" alt="老A有一个幸福的家庭">
            <img class="p1" src="../img/p1.png" alt="老A有一个幸福的家庭"> div.
        </section>
        <section class="screen screen2">
            <img class="img-scenes" src="../img/pic2.jpg" alt="在工作中，老板肯定，同事认可">
            <img src="../img/p2.png" alt="在工作中，老板肯定，同事认可" class="p2">
        </section>
        <section class="screen screen3">
            <img class="img-scenes" src="../img/pic3.jpg" alt="甲：老A去哪里了，今天怎么请假了;乙：听说她女儿生病了">
            <img src="../img/p3.png" alt="甲：老A去哪里了，今天怎么请假了;乙：听说她女儿生病了" class="p3">
        </section>
        <section class="screen screen4">
            <img class="img-scenes" src="../img/pic4.jpg" alt="老A回岗后承受不住压力，原来是女儿得了白血病，花费巨大">
            <img class="p4" src="../img/p4.png" alt="老A回岗后承受不住压力，原来是女儿得了白血病，花费巨大">
        </section>
        <section class="screen screen5">
            <img class="img-scenes" src="../img/pic5.jpg" alt="大家在腾讯公益帮老A建立了项目，纷纷施以援手">
            <img src="../img/p5.png" alt="大家在腾讯公益帮老A建立了项目，纷纷施以援手" class="p5">
        </section>
        <section class="screen screen6">
            <img class="img-scenes" src="../img/pic6.jpg" alt="老A的女儿病情危重，在大家的帮助下，有了些许好转">
            <img class="p6" src="../img/p6.png" alt="老A的女儿病情危重，在大家的帮助下，有了些许好转">
        </section>
        <section class="screen screen7">
            <img class="img-scenes" src="../img/pic7.jpg" alt="经过大家的努力，老A带领大家获得项目成功">
            <img class="p7" src="../img/p7.png" alt="经过大家的努力，老A带领大家获得项目成功">
        </section>
        <section class="screen screen8">
            <img class="img-scenes" src="../img/pic8.jpg" alt="大家在合影留念时，却...">
            <div class="falling-c"></div>
            <img src="../img/p8.png" alt="大家在合影留念时，却..." class="p8">
            <div class="mask"></div>
            <div class="frame1">
                <p><span class="typed-text">生活中我们经常会遇到心理上的困境<br>当你遇到时<br>请正视并及时给予帮助</span></p>
            </div>
            <div class="frame2">
                <p>抑郁症是全球<span style="color: red">健康不良和残疾</span>的主要原因。
                    <br>根据世卫组织的最新统计：
                    <br>目前有<span style="color: red">3亿</span>多人罹患抑郁症，<span style="color: red">数百万人</span>因抑郁症而死。
                    <br>从2005年至2015年，增加了<span style="color: red">18%</span>以上。
                    <br>
                    <br>而抑郁症可以被有效治疗。</p>
            </div>
        </section>
        <section class="screen screen9">
            <div class="main">
                <p class="slogan">
                    关注腾讯公益，关爱心世界
                </p>
                <img class="txgy-qrcode" src="../img/txgy-qrcode.jpg" alt="腾讯公益二维码">
                <p class="more-project"><a target="_blank" href="http://gongyi.qq.com">更多项目&gt;</a></p>
                <ul class="txgy-project">
                    <li>
                        <a target="_blank" href="http://gongyi.qq.com/succor/detail.htm?id=20249"><img src="../img/pro1.jpg" alt="众志成城共抗抑郁症"></a>
                        <p>众志成城共抗抑郁症</p>
                    </li>
                    <li>
                        <a target="_blank" href="http://gongyi.qq.com/succor/detail.htm?id=24293"><img src="../img/pro2.jpg" alt="自闭症儿童家庭支持"></a>
                        <p>自闭症儿童家庭支持</p>
                    </li>
                    <li>
                        <a target="_blank" href="http://gongyi.qq.com/succor/detail.htm?id=17858"><img src="../img/pro3.jpg" alt="失独家庭心理援助"></a>
                        <p>失独家庭心理援助</p>
                    </li>
                    <li>
                        <a target="_blank" href="http://gongyi.qq.com/succor/detail.htm?id=17102"><img src="../img/pro4.jpg" alt="留守儿童心理活动包"></a>
                        <p>留守儿童心理活动包</p>
                    </li>
                </ul>
            </div>
        </section>
    </div>
    <!-- <span id="bgm-switch"></span> -->
    <audio id="bgm" src="../media/audio.mp3"></audio>
    <script src="../js/wxmoment.min.js"></script>
    <script>
    $(function() {
        // 背景音乐
        var bgm = $('#bgm');
        var bgmSwitch = $('#bgm-switch');
        bgmSwitch.on('click', function() {
            if (bgm.hasClass('pause')) {
                bgm[0].play();
                bgmSwitch.removeClass('pause');
                bgm.removeClass('pause');
            } else {
                bgm[0].pause();
                bgmSwitch.addClass('pause');
                bgm.addClass('pause');
            }
        });
        bgm.attr('volume', 0.1);
        bgm[0].play();

        var basePath = "../";

        var loader = new WxMoment.Loader();

        //声明资源文件列表
        var fileList = ['img/pic1.jpg', 'img/pic2.jpg', 'img/pic3.jpg', 'img/pic4.jpg', 'img/pic5.jpg', 'img/pic6.jpg', 'img/pic7.jpg', 'img/pic8.jpg', 'img/p1.png', 'img/p2.png', 'img/p3.png', 'img/p5.png', 'img/p6.png', 'img/p7.png', 'img/p8.png', 'img/falling-c.png', 'img/txgy-qrcode.jpg', 'img/pro1.jpg', 'img/pro2.jpg', 'img/pro3.jpg', 'img/pro4.jpg'];

        for (var i = 0; i < fileList.length; i++) {
            loader.addImage(basePath + fileList[i]);
        }

        //进度监听
        loader.addProgressListener(function(e) {
            var percent = Math.round((e.completedCount / e.totalCount) * 100);
            $('.progress-bar').css('width', percent + '%')
            console.log("当前加载了", percent, "%");
            //在这里做 Loading 页面中百分比的显示
        });

        //加载完成
        loader.addCompletionListener(function() {
            $('.loader').hide()
        });

        //启动加载
        loader.start();

        // 数据统计
        var wa = new WxMoment.Analytics({
            //projectName 请与微信商务团队确认
            projectName: ""
        });

        // 横屏提示
        new WxMoment.OrientationTip();

        // 微信分享
        var share = new WxMoment.Share();

        // 页面
        var screen8 = $('.screen8');
        // 滑屏组件
        var pageSlider = new WxMoment.PageSlider({
            pages: $('.screen'),
            animationPlayOnce: false,
            oninit: function() {
                if (this.index === 0) {
                    $('.screen1').addClass('done');
                }
            },
            onchange: function() {
                var currentScreen = $('.screen' + (this.index + 1));
                if (!currentScreen.hasClass('done')) {
                    currentScreen.addClass('done');
                }
                if (this.index === 7) {
                    screen8.data('lock-prev', true)
                        .data('lock-next', true);
                    var baseTime = 2000;
                    setTimeout(function() {
                        screen8.find('.mask').addClass('show');
                    }, baseTime + 2000)

                    setTimeout(function() {
                        screen8.addClass('fps1');
                    }, baseTime + 4000)

                    setTimeout(function() {
                        screen8.removeClass('fps1');
                    }, baseTime + 8000)

                    setTimeout(function() {
                        screen8.addClass('fps2');
                        screen8.data('lock-prev', false)
                            .data('lock-next', false);
                    }, baseTime + 10000)
                }
            }
        });
    })
    </script>
</body>

</html>
